name: Build and Deploy to Vercel

on:
    push:
        branches:
            - main

jobs:
    build-and-deploy:
        runs-on: ubuntu-latest

        steps:
        - uses: actions/checkout@v2

        - uses: actions/setup-node@v2
            with:
                node-version: 20

        - name: Install dependencies
            run: npm ci

        - name: Build project
            run: npm run build

        - name: Deploy to Vercel
            uses: amondnet/vercel-action@v20
            with:
                vercel-token: ${{ secrets.VERCEL_TOKEN }} # Set this in your repo's secrets
                vercel-org-id: ${{ secrets.VERCEL_ORG_ID }} # Set this in your repo's secrets
                vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }} # Set this in your repo's secrets
#                vercel-args: '--prod'